<!DOCTYPE html>
<html>
<head>
	<title>Impact Game</title>
	<style type="text/css">
		html,body {
			background-color: #333;
			color: #fff;
			font-family: helvetica, arial, sans-serif;
			margin: 0;
			padding: 0;
			font-size: 12pt;
		}

		#canvas {
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			margin: auto;
		}

		#chat-console {
			position: fixed;
			bottom: 0;
			height: 200px;
			width: 80%;
		}
	</style>

	<script type="text/javascript" src="lib/impact/impact.js"></script>
	<script type="text/javascript" src="lib/game/main.js"></script>
	<script>
	</script>
</head>
<body>
	<div id="game">
		<canvas id="canvas"></canvas>
	</div>

	<div id="chat-console">
	  <form id="input-form" class="form-inline">
      <div class="form-group">
        <input id="input-handle" type="text" class="form-control" placeholder="Enter handle" autofocus />
      </div>
      <div class="form-group">
        <input id="input-text" type="text" class="form-control" placeholder="Enter chat text here!" autofocus />
      </div>
      <button class="btn btn-primary">Send</button>
    </form>
		<div id="chat-text"></div>
	</div>
	<script>
		var scheme   = "ws://"; // Production would be wss://
		var uri      = scheme + window.document.location.host + "/";
		var ws       = new WebSocket(uri);
		ws.onmessage = function(message) {
		  var data = JSON.parse(message.data);
			console.log(data);
		};

		document.getElementById("input-form").addEventListener("submit", function(event) {
			event.preventDefault();
		  var handle = 'Boogidy boo!';
		  var text   = 'repetitious';
		  ws.send(JSON.stringify({ handle: handle, text: text }));
		});
	</script>
</body>
</html>
